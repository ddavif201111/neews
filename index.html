<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clicker Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: var(--tg-theme-bg-color, #ffffff);
            --text: var(--tg-theme-text-color, #222);
            --hint: var(--tg-theme-hint-color, #999);
            --btn: var(--tg-theme-button-color, #2481cc);
            --btn-text: var(--tg-theme-button-text-color, #fff);
            --sec-bg: var(--tg-theme-secondary-bg-color, #f0f0f0);
        }

        body {
            font-family: -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        .stats {
            width: 100%;
            padding: 20px;
            background: var(--sec-bg);
            text-align: center;
            border-bottom-left-radius: 25px;
            border-bottom-right-radius: 25px;
        }

        #balance {
            font-size: 48px;
            font-weight: 800;
            margin: 5px 0;
            color: var(--btn);
        }

        .energy-box {
            width: 80%;
            margin: 20px 0;
        }

        .energy-bar {
            width: 100%;
            height: 12px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        #energy-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #ffcc00, #ff9500);
            transition: width 0.2s;
        }

        .click-area {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        .circle {
            width: 220px;
            height: 220px;
            background: radial-gradient(circle, #ffd700, #ff8c00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.05s;
        }

        .circle:active {
            transform: scale(0.95);
        }

        .shop {
            width: 90%;
            background: var(--sec-bg);
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .shop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .shop-btn {
            background: var(--btn);
            color: var(--btn-text);
            border: none;
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: bold;
        }

        .shop-btn:disabled {
            opacity: 0.5;
        }
    </style>
</head>
<body>

    <div class="stats">
        <div id="balance">0</div>
        <div style="font-size: 14px; color: var(--hint);">–ú–û–ù–ï–¢–ò</div>
        <div style="margin-top: 10px; font-weight: bold;">–ï–Ω–µ—Ä–≥—ñ—è: <span id="energy-val">100</span>/100</div>
    </div>

    <div class="click-area">
        <div class="circle" id="clicker">üí∞</div>
    </div>

    <div class="energy-box">
        <div class="energy-bar">
            <div id="energy-fill"></div>
        </div>
    </div>

    <div class="shop">
        <div class="shop-item">
            <div>
                <strong>–ú—É–ª—å—Ç–∏-–∫–ª—ñ–∫ x2</strong><br>
                <small id="price-x2">–¶—ñ–Ω–∞: 50</small>
            </div>
            <button class="shop-btn" id="buy-x2">–ö—É–ø–∏—Ç–∏</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;tg.ready();
        tg.expand();

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∞–±–æ –ø–æ—á–∞—Ç–∫–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
        let coins = Number(localStorage.getItem('coins')) || 0;
        let energy = Number(localStorage.getItem('energy')) || 100;
        let power = Number(localStorage.getItem('power')) || 1;
        const maxEnergy = 100;

        const balanceEl = document.getElementById('balance');
        const energyVal = document.getElementById('energy-val');
        const energyFill = document.getElementById('energy-fill');
        const clicker = document.getElementById('clicker');
        const buyX2Btn = document.getElementById('buy-x2');

        function updateUI() {
            balanceEl.innerText = Math.floor(coins);
            energyVal.innerText = energy;
            energyFill.style.width = (energy / maxEnergy * 100) + '%';
            
            // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ø–∞–º'—è—Ç—å –±—Ä–∞—É–∑–µ—Ä–∞
            localStorage.setItem('coins', coins);
            localStorage.setItem('energy', energy);
            localStorage.setItem('power', power);

            // –ö–Ω–æ–ø–∫–∞ –º–∞–≥–∞–∑–∏–Ω—É
            buyX2Btn.disabled = coins < 50;
        }

        // –ö–ª—ñ–∫
        clicker.addEventListener('click', (e) => {
            if (energy > 0) {
                coins += power;
                energy -= 1;
                tg.HapticFeedback.impactOccurred('light');
                updateUI();
            } else {
                tg.HapticFeedback.notificationOccurred('error');
            }
        });

        // –ö—É–ø—ñ–≤–ª—è –∞–ø–≥—Ä–µ–π–¥—É
        buyX2Btn.addEventListener('click', () => {
            if (coins >= 50) {
                coins -= 50;
                power += 1;
                updateUI();
                tg.showAlert("–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –∫–ª—ñ–∫—É –∑–±—ñ–ª—å—à–µ–Ω–∞!");
            }
        });

        // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó
        setInterval(() => {
            if (energy < maxEnergy) {
                energy++;
                updateUI();
            }
        }, 1500);

        updateUI();
    </script>
</body>
</html>
