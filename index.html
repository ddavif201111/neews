<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –≤—Å–µ –∑–∞–π–≤–µ, —â–æ –º–æ–∂–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ –¥–æ—Ç–∏–∫–∏ */
        body { 
            background: #111; color: white; margin: 0; font-family: sans-serif; 
            text-align: center; display: flex; flex-direction: column; height: 100vh;
        }
        .header { padding: 10px; background: #222; }
        #balance { font-size: 40px; color: gold; margin: 10px 0; }
        
        /* –°—Ç–æ—Ä—ñ–Ω–∫–∏ */
        .page { display: none; flex: 1; padding: 20px; }
        .active { display: block !important; }

        /* –ü–∞–Ω–¥–∞ - —Ç–µ–ø–µ—Ä —Ü–µ –≤–µ–ª–∏–∫–∞ –∫–Ω–æ–ø–∫–∞ */
        #coin-btn {
            width: 200px; height: 200px; border-radius: 50%;
            background: #333; border: 5px solid gold; font-size: 80px;
            margin: 40px auto; display: flex; align-items: center; justify-content: center;
            cursor: pointer; -webkit-user-select: none;
        }
        #coin-btn:active { transform: scale(0.95); }

        /* –ö–æ–º–ø–∞–∫—Ç–Ω–µ –º–µ–Ω—é */
        .nav { 
            display: flex; background: #222; padding: 10px 0; 
            justify-content: center; gap: 30px; border-top: 1px solid #444;
        }
        .nav-item { color: #888; font-size: 12px; cursor: pointer; }
        .nav-item.active { color: #0088cc; font-weight: bold; }
        .nav-item span { font-size: 24px; display: block; }

        .shop-item { background: #222; margin: 10px; padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; }
        button { background: #0088cc; color: white; border: none; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>

<div class="header">
    <div id="lvl-info">–†—ñ–≤–µ–Ω—å 1</div>
    <div id="balance">0</div>
</div>

<div id="pg-game" class="page active">
    <div id="coin-btn">üêº</div>
    <p>–ï–Ω–µ—Ä–≥—ñ—è: <span id="energy">1000</span></p>
</div>

<div id="pg-shop" class="page">
    <div class="shop-item">
        <span>–ö–ª—ñ–∫ (+1) <br> –¶—ñ–Ω–∞: <span id="p-price">50</span></span>
        <button id="buy-p">–ö–£–ü–ò–¢–ò</button>
    </div>
</div>

<div id="pg-task" class="page">
    <div class="shop-item">
        <span>–ë–æ–Ω—É—Å +1000</span>
        <button id="claim-btn">–í–ó–Ø–¢–ò</button>
    </div>
</div>

<div class="nav">
    <div class="nav-item active" id="n-game"><span>üöÄ</span>–ü—Ä–æ—î–∫—Ç</div>
    <div class="nav-item" id="n-shop"><span>üõí</span>–ú–∞–≥–∞–∑–∏–Ω</div>
    <div class="nav-item" id="n-task"><span>üìù</span>–ó–∞–≤–¥–∞–Ω–Ω—è</div>
</div>

<script>
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
    let coins = Number(localStorage.getItem('c')) || 0;
    let xp = Number(localStorage.getItem('xp')) || 0;
    let pLvl = Number(localStorage.getItem('pl')) || 1;
    let energy = 1000;

    const coinBtn = document.getElementById('coin-btn');
    const balanceEl = document.getElementById('balance');
    const energyEl = document.getElementById('energy');

    function updateUI() {
        balanceEl.innerText = Math.floor(coins);
        energyEl.innerText = energy;
        document.getElementById('p-price').innerText = Math.floor(50 * Math.pow(2, pLvl - 1));
        
        // –°–∏—Å—Ç–µ–º–∞ —Ä—ñ–≤–Ω—ñ–≤ –∑–∞ —Ç–≤–æ—ó–º –∑–∞–ø–∏—Ç–æ–º
        let lvl = 1;
        if(xp >= 1000) lvl = 2;
        if(xp >= 3000) lvl = 3;
        if(xp >= 6000) lvl = 4;
        if(xp >= 8000) lvl = 5;
        document.getElementById('lvl-info').innerText = "–†—ñ–≤–µ–Ω—å " + lvl;

        localStorage.setItem('c', coins);
        localStorage.setItem('xp', xp);
        localStorage.setItem('pl', pLvl);
    }

    // –ö–õ–Ü–ö –ü–û –ü–ê–ù–î–Ü
    coinBtn.onclick = function() {
        if (energy > 0) {
            coins += pLvl;
            xp += 1;
            energy -= 1;
            updateUI();
        }
    };

    // –ù–ê–í–Ü–ì–ê–¶–Ü–Ø
    function goTo(pg, navId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));document.getElementById(pg).classList.add('active');
        document.getElementById(navId).classList.add('active');
    }

    document.getElementById('n-game').onclick = () => goTo('pg-game', 'n-game');
    document.getElementById('n-shop').onclick = () => goTo('pg-shop', 'n-shop');
    document.getElementById('n-task').onclick = () => goTo('pg-task', 'n-task');

    // –ö–£–ü–Ü–í–õ–Ø
    document.getElementById('buy-p').onclick = function() {
        let price = Math.floor(50 * Math.pow(2, pLvl - 1));
        if (coins >= price) {
            coins -= price;
            pLvl += 1;
            updateUI();
        }
    };

    // –ë–û–ù–£–°
    document.getElementById('claim-btn').onclick = function() {
        if (localStorage.getItem('clm') !== 'yes') {
            coins += 1000;
            localStorage.setItem('clm', 'yes');
            updateUI();
        }
    };

    // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó
    setInterval(() => {
        if (energy < 1000) {
            energy++;
            updateUI();
        }
    }, 1000);

    updateUI();
</script>
</body>
</html>
